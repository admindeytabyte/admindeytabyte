
<div class="row" *ngIf="selectedProduct">
    <div class="col-md-4">
        <dx-chart id="chartPricing" [dataSource]="vendorCosts">
            <dxi-series argumentField="vendorName" valueField="vendorCost1" type="bar" color="#820b0b">
                <dxo-label [visible]="true" position="inside">
                </dxo-label>
            </dxi-series>
            <dxo-legend [visible]="false"></dxo-legend>
            <dxo-size [height]="150"></dxo-size>
            <dxo-tooltip [enabled]="true"></dxo-tooltip>
        </dx-chart>
    </div>
    <div class="col-md-8">
        <dx-chart id="chartHistory" [dataSource]="productCounts" palette="office">
            <dxi-series argumentField="salesMonth" valueField="orderQty" type="bar" color="#000080">
                <dxo-label [visible]="true" position="inside">
                </dxo-label>
            </dxi-series>
            <dxo-argument-axis>
                <dxo-label format="MMM-yyyy"></dxo-label>
            </dxo-argument-axis>
            <dxo-legend [visible]="false"></dxo-legend>
            <dxo-size [height]="150"></dxo-size>
            <dxo-tooltip [enabled]="true"></dxo-tooltip>
        </dx-chart>
    </div>
</div>

<div class="row">
    <dx-data-grid  class="gridContainer" id="gridPurchaseOrderItems" [dataSource]="poItems"
    [remoteOperations]="false" [allowColumnReordering]="true" [rowAlternationEnabled]="true"
     [showBorders]="true" keyExpr="poDtlId"
    [focusedRowEnabled]="true"
    (onFocusedRowChanged)="productFocusChanged($event)"
    (onCellPrepared)="onItemsCellPrepared($event)"
    (onToolbarPreparing)="onItemsGridToolbarPreparing($event)">
    <dxo-grouping [autoExpandAll]="true"></dxo-grouping>
    <dxo-selection mode="single"></dxo-selection>
    <dxo-search-panel [visible]="true" [width]="300" placeholder="Search...">
    </dxo-search-panel>
    <dxo-scrolling mode="infinite"></dxo-scrolling>
    <dxo-header-filter [visible]="true"></dxo-header-filter>
    <dxo-filter-row [visible]="true"></dxo-filter-row>
    <dxo-group-panel [visible]="true"></dxo-group-panel>
    <dxi-column dataField="productImage" [visible]="showImages"  cellTemplate="cellTemplate" caption="" [width]="100"
        [allowFiltering]="false" [allowSorting]="false" [allowEditing]="false">
    </dxi-column>
    <dxi-column dataField="category" caption="Category" [groupIndex]="0"></dxi-column>
    <dxi-column dataField="productLine" caption="Line" alignment="center" width="100"></dxi-column>
    <dxi-column dataField="sku" caption="Sku" alignment="center" width="100"></dxi-column>
    <dxi-column dataField="description"  alignment="left"></dxi-column>
    <dxi-column dataField="inStockQty" caption="In Stock" dataType="number" alignment="center"[width]="100"></dxi-column>
    <dxi-column dataField="soldQty" caption="Sold Qty" dataType="number" alignment="center"[width]="100"></dxi-column>
    <dxi-column dataField="threshold" caption="Threshold" dataType="number" alignment="center"[width]="80"></dxi-column>
    <dxi-column dataField="orderQty" caption="Order Qty" dataType="number" alignment="center"[width]="100"></dxi-column>
    <dxi-column dataField="receivedQty" [visible]="PoIsOpen()" caption="Rec Qty" dataType="number" alignment="center"[width]="80"></dxi-column>
    <dxi-column dataField="backOrderedQty" [visible]="PoIsOpen()" caption="Back Order Qty" dataType="number" alignment="center"[width]="100"></dxi-column>
    <dxi-column dataField="orderPrice" caption="Order Price ($)" [width]="100" dataType="number" format="currency">
     <dxo-format type="fixedPoint" [precision]="2"></dxo-format>
    </dxi-column>
    <dxi-column dataField="vendorPrice" [visible]="PoIsOpen()" caption="Vendor Price ($)" [width]="100" dataType="number" format="currency">
        <dxo-format type="fixedPoint" [precision]="2"></dxo-format>
    </dxi-column>
    <dxi-column dataField="orderAmount" caption="Total ($)" [width]="150" dataType="number" format="currency">
        <dxo-format type="fixedPoint" [precision]="2"></dxo-format>
    </dxi-column>
    <dxi-column dataField="ordered" caption="Ordered" dataType="boolean" alignment="center"[width]="100"></dxi-column>
    <dxi-column dataField="received" [visible]="PoIsOpen()" caption="Received" dataType="boolean" alignment="center"[width]="120"></dxi-column>
    <dxi-column type="buttons" [width]="120" [visible]="checkRole(41)">
        <dxi-button hint="Edit" icon="edit" [onClick]="editProductClick"></dxi-button>
        <dxi-button hint="Audit" icon="search" [onClick]="showAuditClick"></dxi-button>
        <dxi-button hint="Delete" [visible]="isEditable" icon="clear" [onClick]="deleteItemClick"></dxi-button>
    </dxi-column>
    
       <div *dxTemplate="let data of 'cellTemplate'">
        <img alt="" [src]="data.value" />
    </div>
    <dxo-summary>
        <dxi-group-item column="orderAmount" summaryType="sum"
                  [valueFormat]="{ type: 'currency', precision: 2 }"
                  [showInGroupFooter]="true">
        </dxi-group-item>
    </dxo-summary>
</dx-data-grid>
</div>
